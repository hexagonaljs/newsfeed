var App,FakeWebSocketsAdapter,Glue,Gui,Newsfeed,Post,Story,User,__hasProp={}.hasOwnProperty,__bind=function(a,b){return function(){return a.apply(b,arguments)}};_.defaults(this,{Before:function(a,b,c){return YouAreDaBomb(a,b).before(c)},BeforeAnyCallback:function(a,b,c){return YouAreDaBomb(a,b).beforeAnyCallback(c)},After:function(a,b,c){return YouAreDaBomb(a,b).after(c)},Around:function(a,b,c){return YouAreDaBomb(a,b).around(c)},AfterAll:function(a,b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],g.push(After(a,d,c));return g},LogAll:function(a){var b,c,d;d=[];for(b in a){if(!__hasProp.call(a,b))continue;c=a[b],_.isFunction(c)?d.push(function(b){return Before(a,b,function(){return console.log("calling: "+b)})}(b)):d.push(void 0)}return d},AutoBind:function(a,b){var c,d,e;e=[];for(c in a)d=a[c],_.isFunction(d)?e.push(function(c){if(c.endsWith("Clicked")&&b[c.remove("Clicked")])return After(a,c,function(a){return b[c.remove("Clicked")](a)})}(c)):e.push(void 0);return e}}),Newsfeed=function(){function a(){this.addStory=__bind(this.addStory,this),this.start=__bind(this.start,this),this.stories=[]}return a.prototype.start=function(){},a.prototype.addStory=function(a){return this.stories.push(a)},a}(),Story=function(){function a(a){this.post=a}return a}(),Post=function(){function a(a,b){this.author=a,this.content=b}return a}(),User=function(){function a(a){this.name=a}return a}(),Gui=function(){function a(){this.storyStructure=__bind(this.storyStructure,this),this.appendStory=__bind(this.appendStory,this),this.showFeed=__bind(this.showFeed,this),this.createElementFor=__bind(this.createElementFor,this)}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.showFeed=function(){var a;return a=this.createElementFor("#feed-template"),$(".main").append(a)},a.prototype.appendStory=function(a){var b;return b=this.createElementFor("#story-template",this.storyStructure(a)),$(".feed").prepend(b)},a.prototype.storyStructure=function(a){return{authorName:a.post.author.name,postContent:a.post.content}},a}(),FakeWebSocketsAdapter=function(){function a(){this.newStoryPushed=__bind(this.newStoryPushed,this),this.createStory=__bind(this.createStory,this),this.start=__bind(this.start,this)}return a.prototype.start=function(){var a,b=this;return a=setInterval(function(){return b.newStoryPushed(b.createStory())},3e3),setTimeout(function(){return clearInterval(a)},2e4)},a.prototype.createStory=function(){var a,b,c,d;return b=["Andrzej","Yashke","Rupert","Pawel"].sample(),a=new User(b),c=new Post(a,"some fake data here at "+(new Date).toLocaleTimeString()+" which I disagree with.\n"),d=new Story(c),d},a.prototype.newStoryPushed=function(a){},a}(),Glue=function(){function a(a,b,c){var d=this;this.newsfeed=a,this.gui=b,this.webSocketsAdapter=c,After(this.newsfeed,"start",function(){return d.gui.showFeed()}),After(this.newsfeed,"addStory",function(a){return d.gui.appendStory(a)}),After(this.webSocketsAdapter,"newStoryPushed",function(a){return d.newsfeed.addStory(a)}),LogAll(this.newsfeed),LogAll(this.gui),LogAll(this.webSocketsAdapter)}return a}(),App=function(){function a(){this.fillWithHardcodedData=__bind(this.fillWithHardcodedData,this);var a,b,c;this.newsfeed=new Newsfeed,b=new Gui,c=new FakeWebSocketsAdapter,a=new Glue(this.newsfeed,b,c),this.newsfeed.start(),this.fillWithHardcodedData(),c.start(),window.newsfeed=this.newsfeed}return a.prototype.fillWithHardcodedData=function(){var a,b,c,d,e,f;return a=new User("Andrzej Krzywda"),e=new Post(a,"Look at this: http://hexagonaljs. Sounds like a clean way to Single Page Apps"),d=new Story(e),f=new User("Jan Filipowski"),c=new Post(f,"Arkency blog: http://blog.arkency.com"),b=new Story(c),this.newsfeed.addStory(d),this.newsfeed.addStory(b)},a}(),new App